var map;

var markers = {};
<%= Location::SIGN_OPTIONS.keys.to_json %>.each(function(color) {
  markers[color] = new GIcon(G_DEFAULT_ICON);
  markers[color].image = 'http://labs.google.com/ridefinder/images/mm_20_' + color.toLowerCase() + '.png';
  markers[color].shadow = 'http://labs.google.com/ridefinder/images/mm_20_shadow.png';
  markers[color].iconSize = new GSize(12, 20);
  markers[color].shadowSize = new GSize(22, 20);
  markers[color].iconAnchor = new GPoint(6, 20);
  markers[color].infoWindowAnchor = new GPoint(5, 1);
});

function show_map() {
  if (GBrowserIsCompatible()) {
    map = new GMap2(document.getElementById("map"));
    map.setCenter(new GLatLng(42.77309, -86.101754), 12);
    map.enableScrollWheelZoom();
    map.addControl(new GLargeMapControl());
    map.addControl(new GMapTypeControl());
    map.addControl(new GScaleControl());
    map.addControl(new GOverviewMapControl());
    
    <%= render :partial => @locations %>
  }
}

Event.observe(window, "dom:loaded", show_map);
Event.observe(window, "unload", GUnload);
